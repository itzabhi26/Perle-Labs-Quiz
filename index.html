<script>
const questions = [
 {q:"What is the main goal of Perle Labs?", o:["Social media","AI training data","Gaming","NFT marketplace"], a:1},
 {q:"What does Perle.xyz focus on?", o:["AI tools","Web2 SaaS","Web3 community","Cloud storage"], a:2},
 {q:"Role of contributors?", o:["Spam","Messages only","AI input","Rewards only"], a:2},
 {q:"Quality contribution means?", o:["Volume","Short replies","Value-driven","Random chat"], a:2},
 {q:"Perle.ai is built for?", o:["Gamers","Traders","AI enterprises","Creators"], a:2},
 {q:"Why consistency matters?", o:["Fast rewards","Trust","Spam","Rules break"], a:1},
 {q:"Web3 represents?", o:["Centralized","Trading","Transparency","Closed"], a:2},
 {q:"Improve impact by?", o:["Spam","Repeat","Help others","Off-topic"], a:2},
 {q:"Human-in-the-loop means?", o:["AI alone","Humans train AI","Bots only","No humans"], a:1},
 {q:"Core community value?", o:["Quantity","Fast rewards","Respect","Competition"], a:2}
];

let index = 0;
let score = 0;
let locked = false;
let countdown;

const quizDiv = document.getElementById("quiz");
const timerDiv = document.getElementById("timer");

function loadQuestion() {
  locked = false;
  quizDiv.innerHTML = "";
  timerDiv.innerText = "Next question in 10s";

  const q = questions[index];
  let html = `
    <div class="question-box">
      <div class="question-text">${index+1}. ${q.q}</div>
  `;
  q.o.forEach((opt,i)=>{
    html += `
      <label class="option">
        <input type="radio" name="opt" onclick="selectOption(${i}, this)">
        ${opt}
      </label>
    `;
  });
  html += `</div>`;
  quizDiv.innerHTML = html;

  let time = 10;
  clearInterval(countdown);
  countdown = setInterval(()=>{
    time--;
    timerDiv.innerText = "Next question in " + time + "s";
    if(time === 0){
      clearInterval(countdown);
      nextQuestion();
    }
  },1000);
}

function selectOption(i, el){
  if(locked) return;
  locked = true;

  const options = document.querySelectorAll(".option");
  options.forEach((opt,idx)=>{
    opt.querySelector("input").disabled = true;
    if(idx === i){
      if(i === questions[index].a){
        opt.classList.add("correct");
        score++;
      } else {
        opt.classList.add("wrong");
      }
    }
  });
}

function nextQuestion(){
  index++;
  if(index < questions.length){
    loadQuestion();
  } else {
    showResult();
  }
}

function showResult(){
  clearInterval(countdown);
  const percent = Math.round((score/questions.length)*100);
  let badge = "ðŸ¥‰ Beginner";
  if(percent >= 80) badge = "ðŸ¥‡ Expert";
  else if(percent >= 50) badge = "ðŸ¥ˆ Intermediate";

  quizDiv.innerHTML = "";
  timerDiv.innerHTML = "";
  document.getElementById("result").innerHTML =
    `Score: ${score}/10 (${percent}%)<div class="badge">${badge}</div>`;
}

loadQuestion();
</script>
